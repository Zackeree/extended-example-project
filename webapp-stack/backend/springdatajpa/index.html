<!DOCTYPE html>
<html lang="en" class="js csstransforms3d">
  <head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1, user-scalable=no">
    <meta name="generator" content="Hugo 0.30.2" />
    <meta name="description" content="">


    <link rel="shortcut icon" href="/example-project/images/favicon.png" type="image/x-icon" />
<link rel="icon" href="/example-project/images/favicon.png" type="image/x-icon" />
    <title>Spring Data JPA :: YCP Radio Telescope Knowledge Base</title>
    
    
    <link href="/example-project/css/nucleus.css?1533249088" rel="stylesheet">
    <link href="/example-project/css/font-awesome.min.css?1533249088" rel="stylesheet">
    <link href="/example-project/css/hybrid.css?1533249088" rel="stylesheet">
    <link href="/example-project/css/featherlight.min.css?1533249088" rel="stylesheet">
    <link href="/example-project/css/perfect-scrollbar.min.css?1533249088" rel="stylesheet">
    <link href="/example-project/css/auto-complete.css?1533249088" rel="stylesheet">
    <link href="/example-project/css/theme.css?1533249088" rel="stylesheet">
    <link href="/example-project/css/hugo-theme.css?1533249088" rel="stylesheet">
    
      <link href="/example-project/css/theme-blue.css?1533249088" rel="stylesheet">
    

    <script src="/example-project/js/jquery-2.x.min.js?1533249088"></script>
    
    <style type="text/css">
      :root #header + #content > #left > #rlblock_left{ 
          display:none !important;
      }
      
    </style>
    
  </head>
  <body class="" data-url="/example-project/webapp-stack/backend/springdatajpa/">
    <nav id="sidebar" class="">



  <div id="header-wrapper">
    <div id="header">
      <link href="/example-project/custom.css" rel="stylesheet">
<img src="/example-project/Donald_Hake.png"></img>
    </div>
    
        <div class="searchbox">
    <label for="search-by"><i class="fa fa-search"></i></label>
    <input data-search-input id="search-by" type="text" placeholder="Search...">
    <span data-search-clear=""><i class="fa fa-close"></i></span>
</div>

<script type="text/javascript" src="/example-project/js/lunr.min.js?1533249088"></script>
<script type="text/javascript" src="/example-project/js/auto-complete.js?1533249088"></script>
<script type="text/javascript">
    
        var baseurl = '\/example-project\/';
    
</script>
<script type="text/javascript" src="/example-project/js/search.js?1533249088"></script>

    
  </div>

    <div class="highlightable">
    <ul class="topics">

        
          
          


 
  
    
    <li data-nav-id="/example-project/environment/" title="Development Environment" class="dd-item 
        
        
        
        ">
      <a href="/example-project/environment/">
          Development Environment
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/example-project/environment/idea/" title="IntelliJ IDEA Ultimate Edition" class="dd-item ">
        <a href="/example-project/environment/idea/">
        IntelliJ IDEA Ultimate Edition
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/example-project/environment/npm/" title="NPM" class="dd-item ">
        <a href="/example-project/environment/npm/">
        NPM
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/example-project/styleguides/" title="Code Style Guides" class="dd-item 
        
        
        
        ">
      <a href="/example-project/styleguides/">
          Code Style Guides
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/example-project/styleguides/kotlin/" title="Kotlin Style Guide" class="dd-item ">
        <a href="/example-project/styleguides/kotlin/">
        Kotlin Style Guide
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/example-project/design-patterns/" title="Design Patterns" class="dd-item 
        
        
        
        ">
      <a href="/example-project/design-patterns/">
          Design Patterns
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/example-project/workflows/" title="Development Workflows" class="dd-item 
        
        
        
        ">
      <a href="/example-project/workflows/">
          Development Workflows
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/example-project/workflows/git/" title="Git" class="dd-item 
        
        
        
        ">
      <a href="/example-project/workflows/git/">
          Git
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/example-project/workflows/git/common-git-tasks/" title="Common Git Tasks" class="dd-item ">
        <a href="/example-project/workflows/git/common-git-tasks/">
        Common Git Tasks
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/example-project/gradle/" title="Gradle Build System" class="dd-item 
        
        
        
        ">
      <a href="/example-project/gradle/">
          Gradle Build System
          
      </a>
      
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/example-project/webapp-stack/" title="Radio Telescope Webapp Stack" class="dd-item 
        parent
        
        
        ">
      <a href="/example-project/webapp-stack/">
          Radio Telescope Webapp Stack
          
      </a>
      
      
        <ul>
          
          
            
          
          
          
        
          
            
            


 
  
    
    <li data-nav-id="/example-project/webapp-stack/backend/" title="Backend" class="dd-item 
        parent
        
        
        ">
      <a href="/example-project/webapp-stack/backend/">
          Backend
          
      </a>
      
      
        <ul>
          
          
          
          
        
          
            
            


 
  
    
      <li data-nav-id="/example-project/webapp-stack/backend/springdatajpa/" title="Spring Data JPA" class="dd-item active">
        <a href="/example-project/webapp-stack/backend/springdatajpa/">
        Spring Data JPA
        
        </a>
    </li>
     
  
 

            
          
            
            


 
  
    
      <li data-nav-id="/example-project/webapp-stack/backend/contracts/" title="Radio Telescope Contracts" class="dd-item ">
        <a href="/example-project/webapp-stack/backend/contracts/">
        Radio Telescope Contracts
        
        </a>
    </li>
     
  
 

            
          
        
        </ul>
              
    </li>
  
 

            
          
        
        </ul>
              
    </li>
  
 

          
          


 
  
    
    <li data-nav-id="/example-project/resources/" title="Learning Resources" class="dd-item 
        
        
        
        ">
      <a href="/example-project/resources/">
          Learning Resources
          
      </a>
      
              
    </li>
  
 

          
         
    </ul>

    
    

    
    <section id="footer">
      <link rel="stylesheet" href="/css/theme.css">
<ul>
    <li>
        <a href="https://github.com/cspath1/example-project" target="_blank"><i class="fa fa-github"></i> Example Repo</a>
    </li>
    <li>
        <a href="https://radio-tele-capstone.slack.com" target="_blank"><i class="fa fa-slack"></i> Slack</a>
    </li>
    <li>
        <a href="https://drive.google.com/drive/u/0/folders/0AG8MiFHJZpy0Uk9PVA" target="_blank"><i class="fa fa-google"></i> Team Drive</a>
    </li>
    <li>
        <a href="https://learngitbranching.js.org/" target="_blank"><i class="fa fa-git-square"></i> Learn Git</a>
    </li>
</ul>
    </section>
  </div>
</nav>





        <section id="body">
        <div id="overlay"></div>
        <div class="padding highlightable">
              
              <div>
                <div id="top-bar">
                
                
                <div id="breadcrumbs" itemscope="" itemtype="http://data-vocabulary.org/Breadcrumb">
                    <span id="sidebar-toggle-span">
                        <a href="#" id="sidebar-toggle" data-sidebar-toggle="">
                          <i class="fa fa-bars"></i>
                        </a>
                    </span>
                  
                  <span id="toc-menu"><i class="fa fa-list-alt"></i></span>
                  
                  <span class="links">
                    
          
          
            
            
          
          
            
            
          
          
            
            
          
          
            <a href='/example-project/'>YCP Radio Telescope Knowledge Base</a> > <a href='/example-project/webapp-stack/'>Radio Telescope Webapp Stack</a> > <a href='/example-project/webapp-stack/backend/'>Backend</a> > Spring Data JPA
          
         
          
         
          
         
          
           
                  </span>
                </div>
                
                    <div class="progress">
    <div class="wrapper">
<nav id="TableOfContents">
<ul>
<li>
<ul>
<li><a href="#1-entities-and-repositories">1. Entities and Repositories</a>
<ul>
<li><a href="#a-create">A. Create</a></li>
<li><a href="#b-read">B. Read</a></li>
<li><a href="#c-update">C. Update</a></li>
<li><a href="#d-delete">D. Delete</a></li>
</ul></li>
<li><a href="#2-query-dsl">2. Query DSL</a></li>
<li><a href="#3-query-annotation">3. Query Annotation</a></li>
<li><a href="#4-paging-and-sorting">4. Paging And Sorting</a></li>
</ul></li>
</ul>
</nav>
    </div>
</div>

                
              </div>
            </div>
            

        
        <div id="body-inner">
          
            <h1>Spring Data JPA</h1>
          

        




<h2 id="1-entities-and-repositories">1. Entities and Repositories</h2>

<p>Spring Data JPA (Java Persistence API), part of the Spring Data family, allows us to abstract away much
of the SQL Layer by acting as
a wrapper overtop of the SQL ORM layer. What Spring does is allows us to create Entity objects (indicated via
the @Entity annotation,
which model our database tables and allows us to perform CRUD operations on our MySQL database without actually
ever needing to write a
SQL statement.</p>

<p>This is made possible by Spring Repositories (indicated via the @Repository annotation), which are interfaces that
essentially are able to adapt the
entity objects into SQL statements for us. Each Spring Repository is in charge of managing a single Spring Entity</p>

<h3 id="a-create">A. Create</h3>

<p>For persisting new values, what happens is this. A request from the client-side is sent to the server.
Our &ldquo;business logic&rdquo; (more on this later)
will be in charge of validating any constraints with the request. Once a request gets validated, we will adapt
the client-side request into an Entity object.
Then all we need to do is use the Entity&rsquo;s Repository to persist the new entry (done with the save() method)</p>

<h3 id="b-read">B. Read</h3>

<p>For retrieving existing values from the database, a request from the client-side is sent to the server,
often only containing the id of the record
we wish to pull up. Then all we need to do is call the Entity&rsquo;s Repository method aptly named findById
and it will retrieve the record for us.</p>

<h3 id="c-update">C. Update</h3>

<p>In order to grab an existing entry in the database and update it, we basically combine the processes
for creating and reading.
A request from the client-side will be sent to the server containing all of the new values we wish to
persist, along with the id of the
entry we wish to update.</p>

<h3 id="d-delete">D. Delete</h3>

<p>Deleting an entry is as easy as retrieving it. Pretty much the same exact thing occurs, except we will
be deleting the record rather than returning it to the server.</p>

<h2 id="2-query-dsl">2. Query DSL</h2>

<p>Spring&rsquo;s Query DSL (Domain-Specific Language) is a key feature behind the design choice for the larger Spring
Framework as a whole. It allows us to
build out custom repository methods really easily.The way Spring Data JPA is designed allows Spring Repositories
to be &ldquo;aware&rdquo; of the contents of the Entity
object they are tied to.</p>

<p>This means we can build out really powerful queries as long as we follow the Query DSL syntax.
All methods built using the
Query DSL syntax must start with either &ldquo;findBy&rdquo;, &ldquo;findAllBy&rdquo;, &ldquo;findFirstBy&rdquo;, &ldquo;countBy&rdquo;, or &ldquo;existsBy&rdquo;.</p>

<p>Beyond that, since the Query DSL knows about the fields contained in the Entity object they are tied to,
we can build a method to find all people by
first name just by instantiating the method prototype &ldquo;findAllByFirstName&rdquo;. Spring will deal with the rest.</p>

<h2 id="3-query-annotation">3. Query Annotation</h2>

<p>So I may have ever so slightly fibbed when I said we would NEVER have to write something that resembles a
SQL statement. As it turns out,
there are some queries that we can&rsquo;t build out using Spring Data JPA&rsquo;s. What Spring allows us to do in this
scenario is use their built-in
@Query annotation to build something that is more or less a psuedo-SQL statement.</p>

<p>You can see examples of this in the example project repositories. In the example application, the majority
of the repository methods were written
using the Query annotation, and while it is not necessary, due to an issue with how Kotlin as a language works,
Kotlin has trouble creating those
repository methods correctly sometimes once it is compiled to Java.</p>

<p>As it turns out, the best way to ameliorate this issue is by using the Query annotation. It allows Spring to compile
the repository method correctly because
rather than trying to build the method using the Query DSL, it will use the Query annotation, which works regardless
of the method name it is tied to.</p>

<p>Note that queries built following the Query DSL conventions should work when Kotlin is compiled to Java, but the
Query annotation acts
as an extra failsafe.</p>

<h2 id="4-paging-and-sorting">4. Paging And Sorting</h2>

<p>One final thing to note about Spring Data JPA is the PagingAndSortingRepository interface that all of our repositories
will extend from.
The PagingAndSortingRepository itself extends the basic CrudRepository that Spring has and just adds a few extra methods
that allow for us to
integrate pagination into our list queries for our Entity objects. This will more or less just allow us to return a slice
of an entire set so
we can cut down on network overhead</p>


<footer class=" footline" >
	
</footer>


        
        </div> 
        

      </div>

    <div id="navigation">
        
        
        
        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                    
                
                

                    
                    
                        
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
                        
            
            
                
                    
                    
                
                

                    
                    
                    

                    
            
        
                    
                        
            
            
                
                    
                        
                        
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
                    
            
        
                    
                        
            
            
                
                    
                
                

                    
                    
                    

                    
            
        
                    
            
        
        
        


        
            <a class="nav nav-prev" href="/example-project/webapp-stack/backend/" title="Backend"> <i class="fa fa-chevron-left"></i></a>
        
        
            <a class="nav nav-next" href="/example-project/webapp-stack/backend/contracts/" title="Radio Telescope Contracts" style="margin-right: 0px;"><i class="fa fa-chevron-right"></i></a>
        
    </div>

    </section>
    
    <div style="left: -1000px; overflow: scroll; position: absolute; top: -1000px; border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;">
      <div style="border: none; box-sizing: content-box; height: 200px; margin: 0px; padding: 0px; width: 200px;"></div>
    </div>
    <script src="/example-project/js/clipboard.min.js?1533249088"></script>
    <script src="/example-project/js/perfect-scrollbar.min.js?1533249088"></script>
    <script src="/example-project/js/perfect-scrollbar.jquery.min.js?1533249088"></script>
    <script src="/example-project/js/jquery.sticky.js?1533249088"></script>
    <script src="/example-project/js/featherlight.min.js?1533249088"></script>
    <script src="/example-project/js/html5shiv-printshiv.min.js?1533249088"></script>
    <script src="/example-project/js/highlight.pack.js?1533249088"></script>
    <script>hljs.initHighlightingOnLoad();</script>
    <script src="/example-project/js/modernizr.custom.71422.js?1533249088"></script>
    <script src="/example-project/js/learn.js?1533249088"></script>
    <script src="/example-project/js/hugo-learn.js?1533249088"></script>

    <link href="/example-project/mermaid/mermaid.css?1533249088" type="text/css" rel="stylesheet" />
    <script src="/example-project/mermaid/mermaid.js?1533249088"></script>
    <script>
        mermaid.initialize({ startOnLoad: true });
    </script>
    

  </body>
</html>

